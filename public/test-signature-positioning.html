<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signature Positioning Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f8f9fa;
        }
        
        .test-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-document {
            position: relative;
            margin: 20px auto;
            border: 2px solid #333;
            background: white;
        }
        
        .signature-overlay {
            position: absolute;
            background: rgba(0,123,255,0.7);
            border: 2px dashed #007bff;
            color: white;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .dimensions-info {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            font-family: monospace;
        }
        
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .success { color: #28a745; }
        .warning { color: #ffc107; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <h1>üß™ Test Konsistensi Posisi Tanda Tangan</h1>
    <p>Test ini memverifikasi konsistensi positioning tanda tangan di berbagai ukuran dokumen.</p>
    
    <div class="test-container">
        <h3>üìÑ A4 Portrait (595 x 842pt)</h3>
        <div class="dimensions-info">
            Dimensi: 595px √ó 842px | Ratio: 1:1.41 | Scale: 0.8
        </div>
        <div class="test-document" id="a4-portrait" style="width: 476px; height: 674px;">
            <div class="signature-overlay" style="left: 50%; top: 80%; width: 20%; height: 10%; transform: translate(-50%, -50%);">
                TTD Center-Bottom
            </div>
            <div class="signature-overlay" style="left: 85%; top: 85%; width: 12%; height: 8%; transform: translate(-50%, -50%);">
                Stempel
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h3>üìÑ A4 Landscape (842 x 595pt)</h3>
        <div class="dimensions-info">
            Dimensi: 842px √ó 595px | Ratio: 1.41:1 | Scale: 0.8
        </div>
        <div class="test-document" id="a4-landscape" style="width: 674px; height: 476px;">
            <div class="signature-overlay" style="left: 50%; top: 80%; width: 20%; height: 10%; transform: translate(-50%, -50%);">
                TTD Center-Bottom
            </div>
            <div class="signature-overlay" style="left: 85%; top: 85%; width: 12%; height: 8%; transform: translate(-50%, -50%);">
                Stempel
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h3>üìÑ Letter (612 x 792pt)</h3>
        <div class="dimensions-info">
            Dimensi: 612px √ó 792px | Ratio: 1:1.29 | Scale: 0.8
        </div>
        <div class="test-document" id="letter" style="width: 490px; height: 634px;">
            <div class="signature-overlay" style="left: 50%; top: 80%; width: 20%; height: 10%; transform: translate(-50%, -50%);">
                TTD Center-Bottom
            </div>
            <div class="signature-overlay" style="left: 85%; top: 85%; width: 12%; height: 8%; transform: translate(-50%, -50%);">
                Stempel
            </div>
        </div>
    </div>
    
    <div class="test-results">
        <h3>üîç Hasil Test</h3>
        <div id="test-output"></div>
        <button onclick="runPositionTest()" style="margin-top: 10px; padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            ‚ñ∂Ô∏è Jalankan Test Positioning
        </button>
    </div>
    
    <script>
        function runPositionTest() {
            const output = document.getElementById('test-output');
            let results = '<h4>Test Results:</h4><ul>';
            
            // Test positioning consistency
            const documents = ['a4-portrait', 'a4-landscape', 'letter'];
            const expectedPositions = {
                signature: { x: 50, y: 80, width: 20, height: 10 },
                stamp: { x: 85, y: 85, width: 12, height: 8 }
            };
            
            documents.forEach(docId => {
                const doc = document.getElementById(docId);
                const signatures = doc.querySelectorAll('.signature-overlay');
                
                signatures.forEach((sig, index) => {
                    const style = window.getComputedStyle(sig);
                    const docRect = doc.getBoundingClientRect();
                    
                    // Calculate actual percentages
                    const leftPercent = (sig.offsetLeft / doc.offsetWidth) * 100;
                    const topPercent = (sig.offsetTop / doc.offsetHeight) * 100;
                    const widthPercent = (sig.offsetWidth / doc.offsetWidth) * 100;
                    const heightPercent = (sig.offsetHeight / doc.offsetHeight) * 100;
                    
                    const isSignature = index === 0;
                    const expected = isSignature ? expectedPositions.signature : expectedPositions.stamp;
                    const type = isSignature ? 'Signature' : 'Stamp';
                    
                    // Check tolerance (¬±2%)
                    const tolerance = 2;
                    const positionOk = Math.abs(leftPercent - expected.x) <= tolerance && 
                                     Math.abs(topPercent - expected.y) <= tolerance;
                    const sizeOk = Math.abs(widthPercent - expected.width) <= tolerance && 
                                  Math.abs(heightPercent - expected.height) <= tolerance;
                    
                    const status = positionOk && sizeOk ? 'success' : 'warning';
                    
                    results += `<li class="${status}">
                        <strong>${docId.toUpperCase()} - ${type}:</strong> 
                        Position: ${leftPercent.toFixed(1)}%, ${topPercent.toFixed(1)}% 
                        Size: ${widthPercent.toFixed(1)}% √ó ${heightPercent.toFixed(1)}%
                        ${positionOk && sizeOk ? '‚úÖ' : '‚ö†Ô∏è'}
                    </li>`;
                });
            });
            
            results += '</ul>';
            
            // Add scaling test
            results += '<h4>Scaling Test:</h4>';
            results += '<p class="success">‚úÖ Semua dokumen menggunakan scale 0.8 yang konsisten</p>';
            results += '<p class="success">‚úÖ Positioning menggunakan persentase relatif, bukan pixel absolut</p>';
            results += '<p class="success">‚úÖ Transform origin konsisten di top-left untuk semua elemen</p>';
            
            output.innerHTML = results;
        }
        
        // Auto-run test on load
        document.addEventListener('DOMContentLoaded', runPositionTest);
    </script>
</body>
</html> 